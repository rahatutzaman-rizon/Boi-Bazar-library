var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));

// node_modules/load-script/index.js
var require_load_script = __commonJS({
  "node_modules/load-script/index.js"(exports, module) {
    module.exports = function load(src, opts, cb) {
      var head = document.head || document.getElementsByTagName("head")[0];
      var script = document.createElement("script");
      if (typeof opts === "function") {
        cb = opts;
        opts = {};
      }
      opts = opts || {};
      cb = cb || function() {
      };
      script.type = opts.type || "text/javascript";
      script.charset = opts.charset || "utf8";
      script.async = "async" in opts ? !!opts.async : true;
      script.src = src;
      if (opts.attrs) {
        setAttributes(script, opts.attrs);
      }
      if (opts.text) {
        script.text = "" + opts.text;
      }
      var onend = "onload" in script ? stdOnEnd : ieOnEnd;
      onend(script, cb);
      if (!script.onload) {
        stdOnEnd(script, cb);
      }
      head.appendChild(script);
    };
    function setAttributes(script, attrs) {
      for (var attr in attrs) {
        script.setAttribute(attr, attrs[attr]);
      }
    }
    function stdOnEnd(script, cb) {
      script.onload = function() {
        this.onerror = this.onload = null;
        cb(null, script);
      };
      script.onerror = function() {
        this.onerror = this.onload = null;
        cb(new Error("Failed to load " + this.src), script);
      };
    }
    function ieOnEnd(script, cb) {
      script.onreadystatechange = function() {
        if (this.readyState != "complete" && this.readyState != "loaded")
          return;
        this.onreadystatechange = null;
        cb(null, script);
      };
    }
  }
});

// node_modules/deepmerge/dist/cjs.js
var require_cjs = __commonJS({
  "node_modules/deepmerge/dist/cjs.js"(exports, module) {
    "use strict";
    var isMergeableObject = function isMergeableObject2(value) {
      return isNonNullObject(value) && !isSpecial(value);
    };
    function isNonNullObject(value) {
      return !!value && typeof value === "object";
    }
    function isSpecial(value) {
      var stringValue = Object.prototype.toString.call(value);
      return stringValue === "[object RegExp]" || stringValue === "[object Date]" || isReactElement(value);
    }
    var canUseSymbol = typeof Symbol === "function" && Symbol.for;
    var REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for("react.element") : 60103;
    function isReactElement(value) {
      return value.$$typeof === REACT_ELEMENT_TYPE;
    }
    function emptyTarget(val) {
      return Array.isArray(val) ? [] : {};
    }
    function cloneUnlessOtherwiseSpecified(value, options) {
      return options.clone !== false && options.isMergeableObject(value) ? deepmerge(emptyTarget(value), value, options) : value;
    }
    function defaultArrayMerge(target, source, options) {
      return target.concat(source).map(function(element) {
        return cloneUnlessOtherwiseSpecified(element, options);
      });
    }
    function getMergeFunction(key, options) {
      if (!options.customMerge) {
        return deepmerge;
      }
      var customMerge = options.customMerge(key);
      return typeof customMerge === "function" ? customMerge : deepmerge;
    }
    function getEnumerableOwnPropertySymbols(target) {
      return Object.getOwnPropertySymbols ? Object.getOwnPropertySymbols(target).filter(function(symbol) {
        return Object.propertyIsEnumerable.call(target, symbol);
      }) : [];
    }
    function getKeys(target) {
      return Object.keys(target).concat(getEnumerableOwnPropertySymbols(target));
    }
    function propertyIsOnObject(object, property) {
      try {
        return property in object;
      } catch (_) {
        return false;
      }
    }
    function propertyIsUnsafe(target, key) {
      return propertyIsOnObject(target, key) && !(Object.hasOwnProperty.call(target, key) && Object.propertyIsEnumerable.call(target, key));
    }
    function mergeObject(target, source, options) {
      var destination = {};
      if (options.isMergeableObject(target)) {
        getKeys(target).forEach(function(key) {
          destination[key] = cloneUnlessOtherwiseSpecified(target[key], options);
        });
      }
      getKeys(source).forEach(function(key) {
        if (propertyIsUnsafe(target, key)) {
          return;
        }
        if (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {
          destination[key] = getMergeFunction(key, options)(target[key], source[key], options);
        } else {
          destination[key] = cloneUnlessOtherwiseSpecified(source[key], options);
        }
      });
      return destination;
    }
    function deepmerge(target, source, options) {
      options = options || {};
      options.arrayMerge = options.arrayMerge || defaultArrayMerge;
      options.isMergeableObject = options.isMergeableObject || isMergeableObject;
      options.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;
      var sourceIsArray = Array.isArray(source);
      var targetIsArray = Array.isArray(target);
      var sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;
      if (!sourceAndTargetTypesMatch) {
        return cloneUnlessOtherwiseSpecified(source, options);
      } else if (sourceIsArray) {
        return options.arrayMerge(target, source, options);
      } else {
        return mergeObject(target, source, options);
      }
    }
    deepmerge.all = function deepmergeAll(array, options) {
      if (!Array.isArray(array)) {
        throw new Error("first argument should be an array");
      }
      return array.reduce(function(prev, next) {
        return deepmerge(prev, next, options);
      }, {});
    };
    var deepmerge_1 = deepmerge;
    module.exports = deepmerge_1;
  }
});

// test/utils/getSDK.js
import { test } from "zora";
import sinon from "sinon";

// src/utils.js
var import_load_script = __toESM(require_load_script());
var import_deepmerge = __toESM(require_cjs());
function getGlobal(key) {
  if (window[key]) {
    return window[key];
  }
  if (window.exports && window.exports[key]) {
    return window.exports[key];
  }
  if (window.module && window.module.exports && window.module.exports[key]) {
    return window.module.exports[key];
  }
  return null;
}
var requests = {};
var getSDK = enableStubOn(function getSDK2(url, sdkGlobal, sdkReady = null, isLoaded = () => true, fetchScript = import_load_script.default) {
  const existingGlobal = getGlobal(sdkGlobal);
  if (existingGlobal && isLoaded(existingGlobal)) {
    return Promise.resolve(existingGlobal);
  }
  return new Promise((resolve, reject) => {
    if (requests[url]) {
      requests[url].push({ resolve, reject });
      return;
    }
    requests[url] = [{ resolve, reject }];
    const onLoaded = (sdk) => {
      requests[url].forEach((request) => request.resolve(sdk));
    };
    if (sdkReady) {
      const previousOnReady = window[sdkReady];
      window[sdkReady] = function() {
        if (previousOnReady)
          previousOnReady();
        onLoaded(getGlobal(sdkGlobal));
      };
    }
    fetchScript(url, (err) => {
      if (err) {
        requests[url].forEach((request) => request.reject(err));
        requests[url] = null;
      } else if (!sdkReady) {
        onLoaded(getGlobal(sdkGlobal));
      }
    });
  });
});
function enableStubOn(fn) {
  if (true) {
    const wrap = (...args) => wrap.stub(...args);
    wrap.stub = fn;
    return wrap;
  }
  return fn;
}

// test/utils/getSDK.js
var delay = (ms) => new Promise((resolve) => setTimeout(resolve, ms));
globalThis.window = {};
var beforeEach = () => {
  window.SDK = null;
  window.SDKReady = null;
};
test("serial", async (t) => {
  await t.test("loads script", async (t2) => {
    beforeEach();
    const loadScriptOverride = sinon.fake(async (url, cb) => {
      await delay(15);
      window.SDK = "sdk";
      cb();
    });
    const sdk = await getSDK("http://example.com/abc.js", "SDK", void 0, void 0, loadScriptOverride);
    t2.is(sdk, "sdk");
    t2.ok(loadScriptOverride.calledOnce);
  });
  await t.test("throws on error", async (t2) => {
    beforeEach();
    const loadScriptOverride = sinon.fake(async (url, cb) => {
      await delay(15);
      cb(new Error("Load error"));
    });
    try {
      await getSDK("http://example.com/throws.js", "SDK", void 0, void 0, loadScriptOverride);
      t2.fail("Should throw");
    } catch (err) {
      t2.is(err.message, "Load error");
    }
    t2.ok(loadScriptOverride.calledOnce);
  });
  await t.test("does not fetch again when loaded", async (t2) => {
    beforeEach();
    const loadScriptOverride = sinon.fake();
    window.SDK = "sdk";
    const sdk = await getSDK("http://example.com/def.js", "SDK", void 0, void 0, loadScriptOverride);
    t2.is(sdk, "sdk");
    t2.ok(loadScriptOverride.notCalled);
  });
  await t.test("does not fetch again when loading", async (t2) => {
    beforeEach();
    const loadScriptOverride = sinon.fake(async (url, cb) => {
      await delay(15);
      window.SDK = "sdk";
      cb();
    });
    const result = await Promise.all([
      getSDK("http://example.com/ghi.js", "SDK", void 0, void 0, loadScriptOverride),
      getSDK("http://example.com/ghi.js", "SDK", void 0, void 0, loadScriptOverride)
    ]);
    t2.is(result[0], "sdk");
    t2.is(result[1], "sdk");
    t2.ok(loadScriptOverride.calledOnce);
  });
  await t.test("does fetch again after fetch error", async (t2) => {
    beforeEach();
    const loadScriptOverrideError = sinon.fake(async (url, cb) => {
      await delay(15);
      cb(new Error("Load error"));
    });
    const loadScriptOverride = sinon.fake(async (url, cb) => {
      await delay(15);
      window.SDK = "sdk";
      cb();
    });
    try {
      await getSDK("http://example.com/pqr.js", "SDK", void 0, void 0, loadScriptOverrideError);
      t2.fail("Should throw");
    } catch (err) {
      t2.is(err.message, "Load error");
    }
    const sdk = await getSDK("http://example.com/pqr.js", "SDK", void 0, void 0, loadScriptOverride);
    t2.is(sdk, "sdk");
    t2.ok(loadScriptOverrideError.calledOnce);
    t2.ok(loadScriptOverride.calledOnce);
  });
  await t.test("waits for sdkReady callback", async (t2) => {
    beforeEach();
    const loadScriptOverride = sinon.fake(async (url, cb) => {
      cb();
      await delay(15);
      window.SDK = "sdk";
      window.SDKReady();
    });
    const sdk = await getSDK("http://example.com/jkl.js", "SDK", "SDKReady", void 0, loadScriptOverride);
    t2.is(sdk, "sdk");
    t2.ok(loadScriptOverride.calledOnce);
  });
  await t.test("multiple sdkReady callbacks", async (t2) => {
    beforeEach();
    const loadScriptOverride = sinon.fake(async (url, cb) => {
      cb();
      await delay(15);
      window.SDK = "sdk";
      window.SDKReady();
    });
    const result = await Promise.all([
      await getSDK("http://example.com/mno.js", "SDK", "SDKReady", void 0, loadScriptOverride),
      await getSDK("http://example.com/mno.js", "SDK", "SDKReady", void 0, loadScriptOverride)
    ]);
    t2.is(result[0], "sdk");
    t2.is(result[1], "sdk");
    t2.ok(loadScriptOverride.calledOnce);
  });
});
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vbm9kZV9tb2R1bGVzL2xvYWQtc2NyaXB0L2luZGV4LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9kZWVwbWVyZ2UvZGlzdC9janMuanMiLCAiLi4vLi4vdGVzdC91dGlscy9nZXRTREsuanMiLCAiLi4vLi4vc3JjL3V0aWxzLmpzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gbG9hZCAoc3JjLCBvcHRzLCBjYikge1xuICB2YXIgaGVhZCA9IGRvY3VtZW50LmhlYWQgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXVxuICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0JylcblxuICBpZiAodHlwZW9mIG9wdHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjYiA9IG9wdHNcbiAgICBvcHRzID0ge31cbiAgfVxuXG4gIG9wdHMgPSBvcHRzIHx8IHt9XG4gIGNiID0gY2IgfHwgZnVuY3Rpb24oKSB7fVxuXG4gIHNjcmlwdC50eXBlID0gb3B0cy50eXBlIHx8ICd0ZXh0L2phdmFzY3JpcHQnXG4gIHNjcmlwdC5jaGFyc2V0ID0gb3B0cy5jaGFyc2V0IHx8ICd1dGY4JztcbiAgc2NyaXB0LmFzeW5jID0gJ2FzeW5jJyBpbiBvcHRzID8gISFvcHRzLmFzeW5jIDogdHJ1ZVxuICBzY3JpcHQuc3JjID0gc3JjXG5cbiAgaWYgKG9wdHMuYXR0cnMpIHtcbiAgICBzZXRBdHRyaWJ1dGVzKHNjcmlwdCwgb3B0cy5hdHRycylcbiAgfVxuXG4gIGlmIChvcHRzLnRleHQpIHtcbiAgICBzY3JpcHQudGV4dCA9ICcnICsgb3B0cy50ZXh0XG4gIH1cblxuICB2YXIgb25lbmQgPSAnb25sb2FkJyBpbiBzY3JpcHQgPyBzdGRPbkVuZCA6IGllT25FbmRcbiAgb25lbmQoc2NyaXB0LCBjYilcblxuICAvLyBzb21lIGdvb2QgbGVnYWN5IGJyb3dzZXJzIChmaXJlZm94KSBmYWlsIHRoZSAnaW4nIGRldGVjdGlvbiBhYm92ZVxuICAvLyBzbyBhcyBhIGZhbGxiYWNrIHdlIGFsd2F5cyBzZXQgb25sb2FkXG4gIC8vIG9sZCBJRSB3aWxsIGlnbm9yZSB0aGlzIGFuZCBuZXcgSUUgd2lsbCBzZXQgb25sb2FkXG4gIGlmICghc2NyaXB0Lm9ubG9hZCkge1xuICAgIHN0ZE9uRW5kKHNjcmlwdCwgY2IpO1xuICB9XG5cbiAgaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpXG59XG5cbmZ1bmN0aW9uIHNldEF0dHJpYnV0ZXMoc2NyaXB0LCBhdHRycykge1xuICBmb3IgKHZhciBhdHRyIGluIGF0dHJzKSB7XG4gICAgc2NyaXB0LnNldEF0dHJpYnV0ZShhdHRyLCBhdHRyc1thdHRyXSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gc3RkT25FbmQgKHNjcmlwdCwgY2IpIHtcbiAgc2NyaXB0Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLm9uZXJyb3IgPSB0aGlzLm9ubG9hZCA9IG51bGxcbiAgICBjYihudWxsLCBzY3JpcHQpXG4gIH1cbiAgc2NyaXB0Lm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgLy8gdGhpcy5vbmxvYWQgPSBudWxsIGhlcmUgaXMgbmVjZXNzYXJ5XG4gICAgLy8gYmVjYXVzZSBldmVuIElFOSB3b3JrcyBub3QgbGlrZSBvdGhlcnNcbiAgICB0aGlzLm9uZXJyb3IgPSB0aGlzLm9ubG9hZCA9IG51bGxcbiAgICBjYihuZXcgRXJyb3IoJ0ZhaWxlZCB0byBsb2FkICcgKyB0aGlzLnNyYyksIHNjcmlwdClcbiAgfVxufVxuXG5mdW5jdGlvbiBpZU9uRW5kIChzY3JpcHQsIGNiKSB7XG4gIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMucmVhZHlTdGF0ZSAhPSAnY29tcGxldGUnICYmIHRoaXMucmVhZHlTdGF0ZSAhPSAnbG9hZGVkJykgcmV0dXJuXG4gICAgdGhpcy5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsXG4gICAgY2IobnVsbCwgc2NyaXB0KSAvLyB0aGVyZSBpcyBubyB3YXkgdG8gY2F0Y2ggbG9hZGluZyBlcnJvcnMgaW4gSUU4XG4gIH1cbn1cbiIsICIndXNlIHN0cmljdCc7XG5cbnZhciBpc01lcmdlYWJsZU9iamVjdCA9IGZ1bmN0aW9uIGlzTWVyZ2VhYmxlT2JqZWN0KHZhbHVlKSB7XG5cdHJldHVybiBpc05vbk51bGxPYmplY3QodmFsdWUpXG5cdFx0JiYgIWlzU3BlY2lhbCh2YWx1ZSlcbn07XG5cbmZ1bmN0aW9uIGlzTm9uTnVsbE9iamVjdCh2YWx1ZSkge1xuXHRyZXR1cm4gISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnXG59XG5cbmZ1bmN0aW9uIGlzU3BlY2lhbCh2YWx1ZSkge1xuXHR2YXIgc3RyaW5nVmFsdWUgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpO1xuXG5cdHJldHVybiBzdHJpbmdWYWx1ZSA9PT0gJ1tvYmplY3QgUmVnRXhwXSdcblx0XHR8fCBzdHJpbmdWYWx1ZSA9PT0gJ1tvYmplY3QgRGF0ZV0nXG5cdFx0fHwgaXNSZWFjdEVsZW1lbnQodmFsdWUpXG59XG5cbi8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvYmxvYi9iNWFjOTYzZmI3OTFkMTI5OGU3ZjM5NjIzNjM4M2JjOTU1ZjkxNmMxL3NyYy9pc29tb3JwaGljL2NsYXNzaWMvZWxlbWVudC9SZWFjdEVsZW1lbnQuanMjTDIxLUwyNVxudmFyIGNhblVzZVN5bWJvbCA9IHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgU3ltYm9sLmZvcjtcbnZhciBSRUFDVF9FTEVNRU5UX1RZUEUgPSBjYW5Vc2VTeW1ib2wgPyBTeW1ib2wuZm9yKCdyZWFjdC5lbGVtZW50JykgOiAweGVhYzc7XG5cbmZ1bmN0aW9uIGlzUmVhY3RFbGVtZW50KHZhbHVlKSB7XG5cdHJldHVybiB2YWx1ZS4kJHR5cGVvZiA9PT0gUkVBQ1RfRUxFTUVOVF9UWVBFXG59XG5cbmZ1bmN0aW9uIGVtcHR5VGFyZ2V0KHZhbCkge1xuXHRyZXR1cm4gQXJyYXkuaXNBcnJheSh2YWwpID8gW10gOiB7fVxufVxuXG5mdW5jdGlvbiBjbG9uZVVubGVzc090aGVyd2lzZVNwZWNpZmllZCh2YWx1ZSwgb3B0aW9ucykge1xuXHRyZXR1cm4gKG9wdGlvbnMuY2xvbmUgIT09IGZhbHNlICYmIG9wdGlvbnMuaXNNZXJnZWFibGVPYmplY3QodmFsdWUpKVxuXHRcdD8gZGVlcG1lcmdlKGVtcHR5VGFyZ2V0KHZhbHVlKSwgdmFsdWUsIG9wdGlvbnMpXG5cdFx0OiB2YWx1ZVxufVxuXG5mdW5jdGlvbiBkZWZhdWx0QXJyYXlNZXJnZSh0YXJnZXQsIHNvdXJjZSwgb3B0aW9ucykge1xuXHRyZXR1cm4gdGFyZ2V0LmNvbmNhdChzb3VyY2UpLm1hcChmdW5jdGlvbihlbGVtZW50KSB7XG5cdFx0cmV0dXJuIGNsb25lVW5sZXNzT3RoZXJ3aXNlU3BlY2lmaWVkKGVsZW1lbnQsIG9wdGlvbnMpXG5cdH0pXG59XG5cbmZ1bmN0aW9uIGdldE1lcmdlRnVuY3Rpb24oa2V5LCBvcHRpb25zKSB7XG5cdGlmICghb3B0aW9ucy5jdXN0b21NZXJnZSkge1xuXHRcdHJldHVybiBkZWVwbWVyZ2Vcblx0fVxuXHR2YXIgY3VzdG9tTWVyZ2UgPSBvcHRpb25zLmN1c3RvbU1lcmdlKGtleSk7XG5cdHJldHVybiB0eXBlb2YgY3VzdG9tTWVyZ2UgPT09ICdmdW5jdGlvbicgPyBjdXN0b21NZXJnZSA6IGRlZXBtZXJnZVxufVxuXG5mdW5jdGlvbiBnZXRFbnVtZXJhYmxlT3duUHJvcGVydHlTeW1ib2xzKHRhcmdldCkge1xuXHRyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9sc1xuXHRcdD8gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyh0YXJnZXQpLmZpbHRlcihmdW5jdGlvbihzeW1ib2wpIHtcblx0XHRcdHJldHVybiBPYmplY3QucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbCh0YXJnZXQsIHN5bWJvbClcblx0XHR9KVxuXHRcdDogW11cbn1cblxuZnVuY3Rpb24gZ2V0S2V5cyh0YXJnZXQpIHtcblx0cmV0dXJuIE9iamVjdC5rZXlzKHRhcmdldCkuY29uY2F0KGdldEVudW1lcmFibGVPd25Qcm9wZXJ0eVN5bWJvbHModGFyZ2V0KSlcbn1cblxuZnVuY3Rpb24gcHJvcGVydHlJc09uT2JqZWN0KG9iamVjdCwgcHJvcGVydHkpIHtcblx0dHJ5IHtcblx0XHRyZXR1cm4gcHJvcGVydHkgaW4gb2JqZWN0XG5cdH0gY2F0Y2goXykge1xuXHRcdHJldHVybiBmYWxzZVxuXHR9XG59XG5cbi8vIFByb3RlY3RzIGZyb20gcHJvdG90eXBlIHBvaXNvbmluZyBhbmQgdW5leHBlY3RlZCBtZXJnaW5nIHVwIHRoZSBwcm90b3R5cGUgY2hhaW4uXG5mdW5jdGlvbiBwcm9wZXJ0eUlzVW5zYWZlKHRhcmdldCwga2V5KSB7XG5cdHJldHVybiBwcm9wZXJ0eUlzT25PYmplY3QodGFyZ2V0LCBrZXkpIC8vIFByb3BlcnRpZXMgYXJlIHNhZmUgdG8gbWVyZ2UgaWYgdGhleSBkb24ndCBleGlzdCBpbiB0aGUgdGFyZ2V0IHlldCxcblx0XHQmJiAhKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRhcmdldCwga2V5KSAvLyB1bnNhZmUgaWYgdGhleSBleGlzdCB1cCB0aGUgcHJvdG90eXBlIGNoYWluLFxuXHRcdFx0JiYgT2JqZWN0LnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwodGFyZ2V0LCBrZXkpKSAvLyBhbmQgYWxzbyB1bnNhZmUgaWYgdGhleSdyZSBub25lbnVtZXJhYmxlLlxufVxuXG5mdW5jdGlvbiBtZXJnZU9iamVjdCh0YXJnZXQsIHNvdXJjZSwgb3B0aW9ucykge1xuXHR2YXIgZGVzdGluYXRpb24gPSB7fTtcblx0aWYgKG9wdGlvbnMuaXNNZXJnZWFibGVPYmplY3QodGFyZ2V0KSkge1xuXHRcdGdldEtleXModGFyZ2V0KS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuXHRcdFx0ZGVzdGluYXRpb25ba2V5XSA9IGNsb25lVW5sZXNzT3RoZXJ3aXNlU3BlY2lmaWVkKHRhcmdldFtrZXldLCBvcHRpb25zKTtcblx0XHR9KTtcblx0fVxuXHRnZXRLZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcblx0XHRpZiAocHJvcGVydHlJc1Vuc2FmZSh0YXJnZXQsIGtleSkpIHtcblx0XHRcdHJldHVyblxuXHRcdH1cblxuXHRcdGlmIChwcm9wZXJ0eUlzT25PYmplY3QodGFyZ2V0LCBrZXkpICYmIG9wdGlvbnMuaXNNZXJnZWFibGVPYmplY3Qoc291cmNlW2tleV0pKSB7XG5cdFx0XHRkZXN0aW5hdGlvbltrZXldID0gZ2V0TWVyZ2VGdW5jdGlvbihrZXksIG9wdGlvbnMpKHRhcmdldFtrZXldLCBzb3VyY2Vba2V5XSwgb3B0aW9ucyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGRlc3RpbmF0aW9uW2tleV0gPSBjbG9uZVVubGVzc090aGVyd2lzZVNwZWNpZmllZChzb3VyY2Vba2V5XSwgb3B0aW9ucyk7XG5cdFx0fVxuXHR9KTtcblx0cmV0dXJuIGRlc3RpbmF0aW9uXG59XG5cbmZ1bmN0aW9uIGRlZXBtZXJnZSh0YXJnZXQsIHNvdXJjZSwgb3B0aW9ucykge1xuXHRvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblx0b3B0aW9ucy5hcnJheU1lcmdlID0gb3B0aW9ucy5hcnJheU1lcmdlIHx8IGRlZmF1bHRBcnJheU1lcmdlO1xuXHRvcHRpb25zLmlzTWVyZ2VhYmxlT2JqZWN0ID0gb3B0aW9ucy5pc01lcmdlYWJsZU9iamVjdCB8fCBpc01lcmdlYWJsZU9iamVjdDtcblx0Ly8gY2xvbmVVbmxlc3NPdGhlcndpc2VTcGVjaWZpZWQgaXMgYWRkZWQgdG8gYG9wdGlvbnNgIHNvIHRoYXQgY3VzdG9tIGFycmF5TWVyZ2UoKVxuXHQvLyBpbXBsZW1lbnRhdGlvbnMgY2FuIHVzZSBpdC4gVGhlIGNhbGxlciBtYXkgbm90IHJlcGxhY2UgaXQuXG5cdG9wdGlvbnMuY2xvbmVVbmxlc3NPdGhlcndpc2VTcGVjaWZpZWQgPSBjbG9uZVVubGVzc090aGVyd2lzZVNwZWNpZmllZDtcblxuXHR2YXIgc291cmNlSXNBcnJheSA9IEFycmF5LmlzQXJyYXkoc291cmNlKTtcblx0dmFyIHRhcmdldElzQXJyYXkgPSBBcnJheS5pc0FycmF5KHRhcmdldCk7XG5cdHZhciBzb3VyY2VBbmRUYXJnZXRUeXBlc01hdGNoID0gc291cmNlSXNBcnJheSA9PT0gdGFyZ2V0SXNBcnJheTtcblxuXHRpZiAoIXNvdXJjZUFuZFRhcmdldFR5cGVzTWF0Y2gpIHtcblx0XHRyZXR1cm4gY2xvbmVVbmxlc3NPdGhlcndpc2VTcGVjaWZpZWQoc291cmNlLCBvcHRpb25zKVxuXHR9IGVsc2UgaWYgKHNvdXJjZUlzQXJyYXkpIHtcblx0XHRyZXR1cm4gb3B0aW9ucy5hcnJheU1lcmdlKHRhcmdldCwgc291cmNlLCBvcHRpb25zKVxuXHR9IGVsc2Uge1xuXHRcdHJldHVybiBtZXJnZU9iamVjdCh0YXJnZXQsIHNvdXJjZSwgb3B0aW9ucylcblx0fVxufVxuXG5kZWVwbWVyZ2UuYWxsID0gZnVuY3Rpb24gZGVlcG1lcmdlQWxsKGFycmF5LCBvcHRpb25zKSB7XG5cdGlmICghQXJyYXkuaXNBcnJheShhcnJheSkpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoJ2ZpcnN0IGFyZ3VtZW50IHNob3VsZCBiZSBhbiBhcnJheScpXG5cdH1cblxuXHRyZXR1cm4gYXJyYXkucmVkdWNlKGZ1bmN0aW9uKHByZXYsIG5leHQpIHtcblx0XHRyZXR1cm4gZGVlcG1lcmdlKHByZXYsIG5leHQsIG9wdGlvbnMpXG5cdH0sIHt9KVxufTtcblxudmFyIGRlZXBtZXJnZV8xID0gZGVlcG1lcmdlO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGRlZXBtZXJnZV8xO1xuIiwgImltcG9ydCB7IHRlc3QgfSBmcm9tICd6b3JhJ1xuaW1wb3J0IHNpbm9uIGZyb20gJ3Npbm9uJ1xuaW1wb3J0IHsgZ2V0U0RLIH0gZnJvbSAnLi4vLi4vc3JjL3V0aWxzJ1xuXG5jb25zdCBkZWxheSA9IG1zID0+IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpXG5cbmdsb2JhbFRoaXMud2luZG93ID0ge31cblxuY29uc3QgYmVmb3JlRWFjaCA9ICgpID0+IHtcbiAgd2luZG93LlNESyA9IG51bGxcbiAgd2luZG93LlNES1JlYWR5ID0gbnVsbFxufVxuXG50ZXN0KCdzZXJpYWwnLCBhc3luYyB0ID0+IHtcbiAgYXdhaXQgdC50ZXN0KCdsb2FkcyBzY3JpcHQnLCBhc3luYyB0ID0+IHtcbiAgICBiZWZvcmVFYWNoKClcbiAgICBjb25zdCBsb2FkU2NyaXB0T3ZlcnJpZGUgPSBzaW5vbi5mYWtlKGFzeW5jICh1cmwsIGNiKSA9PiB7XG4gICAgICBhd2FpdCBkZWxheSgxNSlcbiAgICAgIHdpbmRvdy5TREsgPSAnc2RrJ1xuICAgICAgY2IoKVxuICAgIH0pXG4gICAgY29uc3Qgc2RrID0gYXdhaXQgZ2V0U0RLKCdodHRwOi8vZXhhbXBsZS5jb20vYWJjLmpzJywgJ1NESycsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBsb2FkU2NyaXB0T3ZlcnJpZGUpXG4gICAgdC5pcyhzZGssICdzZGsnKVxuICAgIHQub2sobG9hZFNjcmlwdE92ZXJyaWRlLmNhbGxlZE9uY2UpXG4gIH0pXG5cbiAgYXdhaXQgdC50ZXN0KCd0aHJvd3Mgb24gZXJyb3InLCBhc3luYyB0ID0+IHtcbiAgICBiZWZvcmVFYWNoKClcbiAgICBjb25zdCBsb2FkU2NyaXB0T3ZlcnJpZGUgPSBzaW5vbi5mYWtlKGFzeW5jICh1cmwsIGNiKSA9PiB7XG4gICAgICBhd2FpdCBkZWxheSgxNSlcbiAgICAgIGNiKG5ldyBFcnJvcignTG9hZCBlcnJvcicpKVxuICAgIH0pXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGdldFNESygnaHR0cDovL2V4YW1wbGUuY29tL3Rocm93cy5qcycsICdTREsnLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgbG9hZFNjcmlwdE92ZXJyaWRlKVxuICAgICAgdC5mYWlsKCdTaG91bGQgdGhyb3cnKVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdC5pcyhlcnIubWVzc2FnZSwgJ0xvYWQgZXJyb3InKVxuICAgIH1cbiAgICB0Lm9rKGxvYWRTY3JpcHRPdmVycmlkZS5jYWxsZWRPbmNlKVxuICB9KVxuXG4gIGF3YWl0IHQudGVzdCgnZG9lcyBub3QgZmV0Y2ggYWdhaW4gd2hlbiBsb2FkZWQnLCBhc3luYyB0ID0+IHtcbiAgICBiZWZvcmVFYWNoKClcbiAgICBjb25zdCBsb2FkU2NyaXB0T3ZlcnJpZGUgPSBzaW5vbi5mYWtlKClcbiAgICB3aW5kb3cuU0RLID0gJ3NkaydcbiAgICBjb25zdCBzZGsgPSBhd2FpdCBnZXRTREsoJ2h0dHA6Ly9leGFtcGxlLmNvbS9kZWYuanMnLCAnU0RLJywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGxvYWRTY3JpcHRPdmVycmlkZSlcbiAgICB0LmlzKHNkaywgJ3NkaycpXG4gICAgdC5vayhsb2FkU2NyaXB0T3ZlcnJpZGUubm90Q2FsbGVkKVxuICB9KVxuXG4gIGF3YWl0IHQudGVzdCgnZG9lcyBub3QgZmV0Y2ggYWdhaW4gd2hlbiBsb2FkaW5nJywgYXN5bmMgdCA9PiB7XG4gICAgYmVmb3JlRWFjaCgpXG4gICAgY29uc3QgbG9hZFNjcmlwdE92ZXJyaWRlID0gc2lub24uZmFrZShhc3luYyAodXJsLCBjYikgPT4ge1xuICAgICAgYXdhaXQgZGVsYXkoMTUpXG4gICAgICB3aW5kb3cuU0RLID0gJ3NkaydcbiAgICAgIGNiKClcbiAgICB9KVxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgIGdldFNESygnaHR0cDovL2V4YW1wbGUuY29tL2doaS5qcycsICdTREsnLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgbG9hZFNjcmlwdE92ZXJyaWRlKSxcbiAgICAgIGdldFNESygnaHR0cDovL2V4YW1wbGUuY29tL2doaS5qcycsICdTREsnLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgbG9hZFNjcmlwdE92ZXJyaWRlKVxuICAgIF0pXG4gICAgdC5pcyhyZXN1bHRbMF0sICdzZGsnKVxuICAgIHQuaXMocmVzdWx0WzFdLCAnc2RrJylcbiAgICB0Lm9rKGxvYWRTY3JpcHRPdmVycmlkZS5jYWxsZWRPbmNlKVxuICB9KVxuXG4gIGF3YWl0IHQudGVzdCgnZG9lcyBmZXRjaCBhZ2FpbiBhZnRlciBmZXRjaCBlcnJvcicsIGFzeW5jIHQgPT4ge1xuICAgIGJlZm9yZUVhY2goKVxuICAgIGNvbnN0IGxvYWRTY3JpcHRPdmVycmlkZUVycm9yID0gc2lub24uZmFrZShhc3luYyAodXJsLCBjYikgPT4ge1xuICAgICAgYXdhaXQgZGVsYXkoMTUpXG4gICAgICBjYihuZXcgRXJyb3IoJ0xvYWQgZXJyb3InKSlcbiAgICB9KVxuICAgIGNvbnN0IGxvYWRTY3JpcHRPdmVycmlkZSA9IHNpbm9uLmZha2UoYXN5bmMgKHVybCwgY2IpID0+IHtcbiAgICAgIGF3YWl0IGRlbGF5KDE1KVxuICAgICAgd2luZG93LlNESyA9ICdzZGsnXG4gICAgICBjYigpXG4gICAgfSlcbiAgICB0cnkge1xuICAgICAgYXdhaXQgZ2V0U0RLKCdodHRwOi8vZXhhbXBsZS5jb20vcHFyLmpzJywgJ1NESycsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBsb2FkU2NyaXB0T3ZlcnJpZGVFcnJvcilcbiAgICAgIHQuZmFpbCgnU2hvdWxkIHRocm93JylcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHQuaXMoZXJyLm1lc3NhZ2UsICdMb2FkIGVycm9yJylcbiAgICB9XG4gICAgY29uc3Qgc2RrID0gYXdhaXQgZ2V0U0RLKCdodHRwOi8vZXhhbXBsZS5jb20vcHFyLmpzJywgJ1NESycsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBsb2FkU2NyaXB0T3ZlcnJpZGUpXG4gICAgdC5pcyhzZGssICdzZGsnKVxuICAgIHQub2sobG9hZFNjcmlwdE92ZXJyaWRlRXJyb3IuY2FsbGVkT25jZSlcbiAgICB0Lm9rKGxvYWRTY3JpcHRPdmVycmlkZS5jYWxsZWRPbmNlKVxuICB9KVxuXG4gIGF3YWl0IHQudGVzdCgnd2FpdHMgZm9yIHNka1JlYWR5IGNhbGxiYWNrJywgYXN5bmMgdCA9PiB7XG4gICAgYmVmb3JlRWFjaCgpXG4gICAgY29uc3QgbG9hZFNjcmlwdE92ZXJyaWRlID0gc2lub24uZmFrZShhc3luYyAodXJsLCBjYikgPT4ge1xuICAgICAgY2IoKVxuICAgICAgYXdhaXQgZGVsYXkoMTUpXG4gICAgICB3aW5kb3cuU0RLID0gJ3NkaydcbiAgICAgIHdpbmRvdy5TREtSZWFkeSgpIC8vIFRoaXMgZG9lc24ndCB3b3JrIGZvciBzb21lIHJlYXNvbj9cbiAgICB9KVxuICAgIGNvbnN0IHNkayA9IGF3YWl0IGdldFNESygnaHR0cDovL2V4YW1wbGUuY29tL2prbC5qcycsICdTREsnLCAnU0RLUmVhZHknLCB1bmRlZmluZWQsIGxvYWRTY3JpcHRPdmVycmlkZSlcbiAgICB0LmlzKHNkaywgJ3NkaycpXG4gICAgdC5vayhsb2FkU2NyaXB0T3ZlcnJpZGUuY2FsbGVkT25jZSlcbiAgfSlcblxuICBhd2FpdCB0LnRlc3QoJ211bHRpcGxlIHNka1JlYWR5IGNhbGxiYWNrcycsIGFzeW5jIHQgPT4ge1xuICAgIGJlZm9yZUVhY2goKVxuICAgIGNvbnN0IGxvYWRTY3JpcHRPdmVycmlkZSA9IHNpbm9uLmZha2UoYXN5bmMgKHVybCwgY2IpID0+IHtcbiAgICAgIGNiKClcbiAgICAgIGF3YWl0IGRlbGF5KDE1KVxuICAgICAgd2luZG93LlNESyA9ICdzZGsnXG4gICAgICB3aW5kb3cuU0RLUmVhZHkoKVxuICAgIH0pXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgYXdhaXQgZ2V0U0RLKCdodHRwOi8vZXhhbXBsZS5jb20vbW5vLmpzJywgJ1NESycsICdTREtSZWFkeScsIHVuZGVmaW5lZCwgbG9hZFNjcmlwdE92ZXJyaWRlKSxcbiAgICAgIGF3YWl0IGdldFNESygnaHR0cDovL2V4YW1wbGUuY29tL21uby5qcycsICdTREsnLCAnU0RLUmVhZHknLCB1bmRlZmluZWQsIGxvYWRTY3JpcHRPdmVycmlkZSlcbiAgICBdKVxuICAgIHQuaXMocmVzdWx0WzBdLCAnc2RrJylcbiAgICB0LmlzKHJlc3VsdFsxXSwgJ3NkaycpXG4gICAgdC5vayhsb2FkU2NyaXB0T3ZlcnJpZGUuY2FsbGVkT25jZSlcbiAgfSlcbn0pXG4iLCAiaW1wb3J0IGxvYWRTY3JpcHQgZnJvbSAnbG9hZC1zY3JpcHQnXG5pbXBvcnQgbWVyZ2UgZnJvbSAnZGVlcG1lcmdlJ1xuXG5jb25zdCBNQVRDSF9TVEFSVF9RVUVSWSA9IC9bPyYjXSg/OnN0YXJ0fHQpPShbMC05aG1zXSspL1xuY29uc3QgTUFUQ0hfRU5EX1FVRVJZID0gL1s/JiNdZW5kPShbMC05aG1zXSspL1xuY29uc3QgTUFUQ0hfU1RBUlRfU1RBTVAgPSAvKFxcZCspKGh8bXxzKS9nXG5jb25zdCBNQVRDSF9OVU1FUklDID0gL15cXGQrJC9cblxuLy8gUGFyc2UgWW91VHViZSBVUkwgZm9yIGEgc3RhcnQgdGltZSBwYXJhbSwgaWUgP3Q9MWgxNG0zMHNcbi8vIGFuZCByZXR1cm4gdGhlIHN0YXJ0IHRpbWUgaW4gc2Vjb25kc1xuZnVuY3Rpb24gcGFyc2VUaW1lUGFyYW0gKHVybCwgcGF0dGVybikge1xuICBpZiAodXJsIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cbiAgY29uc3QgbWF0Y2ggPSB1cmwubWF0Y2gocGF0dGVybilcbiAgaWYgKG1hdGNoKSB7XG4gICAgY29uc3Qgc3RhbXAgPSBtYXRjaFsxXVxuICAgIGlmIChzdGFtcC5tYXRjaChNQVRDSF9TVEFSVF9TVEFNUCkpIHtcbiAgICAgIHJldHVybiBwYXJzZVRpbWVTdHJpbmcoc3RhbXApXG4gICAgfVxuICAgIGlmIChNQVRDSF9OVU1FUklDLnRlc3Qoc3RhbXApKSB7XG4gICAgICByZXR1cm4gcGFyc2VJbnQoc3RhbXApXG4gICAgfVxuICB9XG4gIHJldHVybiB1bmRlZmluZWRcbn1cblxuZnVuY3Rpb24gcGFyc2VUaW1lU3RyaW5nIChzdGFtcCkge1xuICBsZXQgc2Vjb25kcyA9IDBcbiAgbGV0IGFycmF5ID0gTUFUQ0hfU1RBUlRfU1RBTVAuZXhlYyhzdGFtcClcbiAgd2hpbGUgKGFycmF5ICE9PSBudWxsKSB7XG4gICAgY29uc3QgWywgY291bnQsIHBlcmlvZF0gPSBhcnJheVxuICAgIGlmIChwZXJpb2QgPT09ICdoJykgc2Vjb25kcyArPSBwYXJzZUludChjb3VudCwgMTApICogNjAgKiA2MFxuICAgIGlmIChwZXJpb2QgPT09ICdtJykgc2Vjb25kcyArPSBwYXJzZUludChjb3VudCwgMTApICogNjBcbiAgICBpZiAocGVyaW9kID09PSAncycpIHNlY29uZHMgKz0gcGFyc2VJbnQoY291bnQsIDEwKVxuICAgIGFycmF5ID0gTUFUQ0hfU1RBUlRfU1RBTVAuZXhlYyhzdGFtcClcbiAgfVxuICByZXR1cm4gc2Vjb25kc1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTdGFydFRpbWUgKHVybCkge1xuICByZXR1cm4gcGFyc2VUaW1lUGFyYW0odXJsLCBNQVRDSF9TVEFSVF9RVUVSWSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRW5kVGltZSAodXJsKSB7XG4gIHJldHVybiBwYXJzZVRpbWVQYXJhbSh1cmwsIE1BVENIX0VORF9RVUVSWSlcbn1cblxuLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMzg2MjI1NDVcbmV4cG9ydCBmdW5jdGlvbiByYW5kb21TdHJpbmcgKCkge1xuICByZXR1cm4gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDUpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBxdWVyeVN0cmluZyAob2JqZWN0KSB7XG4gIHJldHVybiBPYmplY3RcbiAgICAua2V5cyhvYmplY3QpXG4gICAgLm1hcChrZXkgPT4gYCR7a2V5fT0ke29iamVjdFtrZXldfWApXG4gICAgLmpvaW4oJyYnKVxufVxuXG5mdW5jdGlvbiBnZXRHbG9iYWwgKGtleSkge1xuICBpZiAod2luZG93W2tleV0pIHtcbiAgICByZXR1cm4gd2luZG93W2tleV1cbiAgfVxuICBpZiAod2luZG93LmV4cG9ydHMgJiYgd2luZG93LmV4cG9ydHNba2V5XSkge1xuICAgIHJldHVybiB3aW5kb3cuZXhwb3J0c1trZXldXG4gIH1cbiAgaWYgKHdpbmRvdy5tb2R1bGUgJiYgd2luZG93Lm1vZHVsZS5leHBvcnRzICYmIHdpbmRvdy5tb2R1bGUuZXhwb3J0c1trZXldKSB7XG4gICAgcmV0dXJuIHdpbmRvdy5tb2R1bGUuZXhwb3J0c1trZXldXG4gIH1cbiAgcmV0dXJuIG51bGxcbn1cblxuLy8gVXRpbCBmdW5jdGlvbiB0byBsb2FkIGFuIGV4dGVybmFsIFNES1xuLy8gb3IgcmV0dXJuIHRoZSBTREsgaWYgaXQgaXMgYWxyZWFkeSBsb2FkZWRcbmNvbnN0IHJlcXVlc3RzID0ge31cbmV4cG9ydCBjb25zdCBnZXRTREsgPSBlbmFibGVTdHViT24oZnVuY3Rpb24gZ2V0U0RLICh1cmwsIHNka0dsb2JhbCwgc2RrUmVhZHkgPSBudWxsLCBpc0xvYWRlZCA9ICgpID0+IHRydWUsIGZldGNoU2NyaXB0ID0gbG9hZFNjcmlwdCkge1xuICBjb25zdCBleGlzdGluZ0dsb2JhbCA9IGdldEdsb2JhbChzZGtHbG9iYWwpXG4gIGlmIChleGlzdGluZ0dsb2JhbCAmJiBpc0xvYWRlZChleGlzdGluZ0dsb2JhbCkpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGV4aXN0aW5nR2xvYmFsKVxuICB9XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgLy8gSWYgd2UgYXJlIGFscmVhZHkgbG9hZGluZyB0aGUgU0RLLCBhZGQgdGhlIHJlc29sdmUgYW5kIHJlamVjdFxuICAgIC8vIGZ1bmN0aW9ucyB0byB0aGUgZXhpc3RpbmcgYXJyYXkgb2YgcmVxdWVzdHNcbiAgICBpZiAocmVxdWVzdHNbdXJsXSkge1xuICAgICAgcmVxdWVzdHNbdXJsXS5wdXNoKHsgcmVzb2x2ZSwgcmVqZWN0IH0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgcmVxdWVzdHNbdXJsXSA9IFt7IHJlc29sdmUsIHJlamVjdCB9XVxuICAgIGNvbnN0IG9uTG9hZGVkID0gc2RrID0+IHtcbiAgICAgIC8vIFdoZW4gbG9hZGVkLCByZXNvbHZlIGFsbCBwZW5kaW5nIHJlcXVlc3QgcHJvbWlzZXNcbiAgICAgIHJlcXVlc3RzW3VybF0uZm9yRWFjaChyZXF1ZXN0ID0+IHJlcXVlc3QucmVzb2x2ZShzZGspKVxuICAgIH1cbiAgICBpZiAoc2RrUmVhZHkpIHtcbiAgICAgIGNvbnN0IHByZXZpb3VzT25SZWFkeSA9IHdpbmRvd1tzZGtSZWFkeV1cbiAgICAgIHdpbmRvd1tzZGtSZWFkeV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChwcmV2aW91c09uUmVhZHkpIHByZXZpb3VzT25SZWFkeSgpXG4gICAgICAgIG9uTG9hZGVkKGdldEdsb2JhbChzZGtHbG9iYWwpKVxuICAgICAgfVxuICAgIH1cbiAgICBmZXRjaFNjcmlwdCh1cmwsIGVyciA9PiB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIC8vIExvYWRpbmcgdGhlIFNESyBmYWlsZWQgXHUyMDEzIHJlamVjdCBhbGwgcmVxdWVzdHMgYW5kXG4gICAgICAgIC8vIHJlc2V0IHRoZSBhcnJheSBvZiByZXF1ZXN0cyBmb3IgdGhpcyBTREtcbiAgICAgICAgcmVxdWVzdHNbdXJsXS5mb3JFYWNoKHJlcXVlc3QgPT4gcmVxdWVzdC5yZWplY3QoZXJyKSlcbiAgICAgICAgcmVxdWVzdHNbdXJsXSA9IG51bGxcbiAgICAgIH0gZWxzZSBpZiAoIXNka1JlYWR5KSB7XG4gICAgICAgIG9uTG9hZGVkKGdldEdsb2JhbChzZGtHbG9iYWwpKVxuICAgICAgfVxuICAgIH0pXG4gIH0pXG59KVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29uZmlnIChwcm9wcywgZGVmYXVsdFByb3BzKSB7XG4gIHJldHVybiBtZXJnZShkZWZhdWx0UHJvcHMuY29uZmlnLCBwcm9wcy5jb25maWcpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBvbWl0IChvYmplY3QsIC4uLmFycmF5cykge1xuICBjb25zdCBvbWl0S2V5cyA9IFtdLmNvbmNhdCguLi5hcnJheXMpXG4gIGNvbnN0IG91dHB1dCA9IHt9XG4gIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpXG4gIGZvciAoY29uc3Qga2V5IG9mIGtleXMpIHtcbiAgICBpZiAob21pdEtleXMuaW5kZXhPZihrZXkpID09PSAtMSkge1xuICAgICAgb3V0cHV0W2tleV0gPSBvYmplY3Rba2V5XVxuICAgIH1cbiAgfVxuICByZXR1cm4gb3V0cHV0XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjYWxsUGxheWVyIChtZXRob2QsIC4uLmFyZ3MpIHtcbiAgLy8gVXRpbCBtZXRob2QgZm9yIGNhbGxpbmcgYSBtZXRob2Qgb24gdGhpcy5wbGF5ZXJcbiAgLy8gYnV0IGd1YXJkIGFnYWluc3QgZXJyb3JzIGFuZCBjb25zb2xlLndhcm4gaW5zdGVhZFxuICBpZiAoIXRoaXMucGxheWVyIHx8ICF0aGlzLnBsYXllclttZXRob2RdKSB7XG4gICAgbGV0IG1lc3NhZ2UgPSBgUmVhY3RQbGF5ZXI6ICR7dGhpcy5jb25zdHJ1Y3Rvci5kaXNwbGF5TmFtZX0gcGxheWVyIGNvdWxkIG5vdCBjYWxsICVjJHttZXRob2R9JWMgXHUyMDEzIGBcbiAgICBpZiAoIXRoaXMucGxheWVyKSB7XG4gICAgICBtZXNzYWdlICs9ICdUaGUgcGxheWVyIHdhcyBub3QgYXZhaWxhYmxlJ1xuICAgIH0gZWxzZSBpZiAoIXRoaXMucGxheWVyW21ldGhvZF0pIHtcbiAgICAgIG1lc3NhZ2UgKz0gJ1RoZSBtZXRob2Qgd2FzIG5vdCBhdmFpbGFibGUnXG4gICAgfVxuICAgIGNvbnNvbGUud2FybihtZXNzYWdlLCAnZm9udC13ZWlnaHQ6IGJvbGQnLCAnJylcbiAgICByZXR1cm4gbnVsbFxuICB9XG4gIHJldHVybiB0aGlzLnBsYXllclttZXRob2RdKC4uLmFyZ3MpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc01lZGlhU3RyZWFtICh1cmwpIHtcbiAgcmV0dXJuIChcbiAgICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgIHR5cGVvZiB3aW5kb3cuTWVkaWFTdHJlYW0gIT09ICd1bmRlZmluZWQnICYmXG4gICAgdXJsIGluc3RhbmNlb2Ygd2luZG93Lk1lZGlhU3RyZWFtXG4gIClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzQmxvYlVybCAodXJsKSB7XG4gIHJldHVybiAvXmJsb2I6Ly50ZXN0KHVybClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN1cHBvcnRzV2ViS2l0UHJlc2VudGF0aW9uTW9kZSAodmlkZW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpKSB7XG4gIC8vIENoZWNrIGlmIFNhZmFyaSBzdXBwb3J0cyBQaVAsIGFuZCBpcyBub3Qgb24gbW9iaWxlIChvdGhlciB0aGFuIGlQYWQpXG4gIC8vIGlQaG9uZSBzYWZhcmkgYXBwZWFycyB0byBcInN1cHBvcnRcIiBQaVAgdGhyb3VnaCB0aGUgY2hlY2ssIGhvd2V2ZXIgUGlQIGRvZXMgbm90IGZ1bmN0aW9uXG4gIGNvbnN0IG5vdE1vYmlsZSA9IC9pUGhvbmV8aVBvZC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSA9PT0gZmFsc2VcbiAgcmV0dXJuIHZpZGVvLndlYmtpdFN1cHBvcnRzUHJlc2VudGF0aW9uTW9kZSAmJiB0eXBlb2YgdmlkZW8ud2Via2l0U2V0UHJlc2VudGF0aW9uTW9kZSA9PT0gJ2Z1bmN0aW9uJyAmJiBub3RNb2JpbGVcbn1cblxuLy8gV29ya2Fyb3VuZCBmb3IgYmVpbmcgYWJsZSB0byBzdHViIG91dCBmdW5jdGlvbnMgaW4gRVNNIGV4cG9ydHMuXG4vLyBodHRwczovL2dpdGh1Yi5jb20vZXZhbncvZXNidWlsZC9pc3N1ZXMvNDEyI2lzc3VlY29tbWVudC03MjMwNDcyNTVcbmZ1bmN0aW9uIGVuYWJsZVN0dWJPbiAoZm4pIHtcbiAgaWYgKGdsb2JhbFRoaXMuX19URVNUX18pIHtcbiAgICBjb25zdCB3cmFwID0gKC4uLmFyZ3MpID0+IHdyYXAuc3R1YiguLi5hcmdzKVxuICAgIHdyYXAuc3R1YiA9IGZuXG4gICAgcmV0dXJuIHdyYXBcbiAgfVxuICByZXR1cm4gZm5cbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFDQSxXQUFPLFVBQVUsU0FBUyxLQUFNLEtBQUssTUFBTSxJQUFJO0FBQzdDLFVBQUksT0FBTyxTQUFTLFFBQVEsU0FBUyxxQkFBcUIsTUFBTSxFQUFFLENBQUM7QUFDbkUsVUFBSSxTQUFTLFNBQVMsY0FBYyxRQUFRO0FBRTVDLFVBQUksT0FBTyxTQUFTLFlBQVk7QUFDOUIsYUFBSztBQUNMLGVBQU8sQ0FBQztBQUFBLE1BQ1Y7QUFFQSxhQUFPLFFBQVEsQ0FBQztBQUNoQixXQUFLLE1BQU0sV0FBVztBQUFBLE1BQUM7QUFFdkIsYUFBTyxPQUFPLEtBQUssUUFBUTtBQUMzQixhQUFPLFVBQVUsS0FBSyxXQUFXO0FBQ2pDLGFBQU8sUUFBUSxXQUFXLE9BQU8sQ0FBQyxDQUFDLEtBQUssUUFBUTtBQUNoRCxhQUFPLE1BQU07QUFFYixVQUFJLEtBQUssT0FBTztBQUNkLHNCQUFjLFFBQVEsS0FBSyxLQUFLO0FBQUEsTUFDbEM7QUFFQSxVQUFJLEtBQUssTUFBTTtBQUNiLGVBQU8sT0FBTyxLQUFLLEtBQUs7QUFBQSxNQUMxQjtBQUVBLFVBQUksUUFBUSxZQUFZLFNBQVMsV0FBVztBQUM1QyxZQUFNLFFBQVEsRUFBRTtBQUtoQixVQUFJLENBQUMsT0FBTyxRQUFRO0FBQ2xCLGlCQUFTLFFBQVEsRUFBRTtBQUFBLE1BQ3JCO0FBRUEsV0FBSyxZQUFZLE1BQU07QUFBQSxJQUN6QjtBQUVBLGFBQVMsY0FBYyxRQUFRLE9BQU87QUFDcEMsZUFBUyxRQUFRLE9BQU87QUFDdEIsZUFBTyxhQUFhLE1BQU0sTUFBTSxJQUFJLENBQUM7QUFBQSxNQUN2QztBQUFBLElBQ0Y7QUFFQSxhQUFTLFNBQVUsUUFBUSxJQUFJO0FBQzdCLGFB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
